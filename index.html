
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="./images/favicon.ico">

    <title>Blog Template for Bootstrap</title>

    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="./css/blog.css" rel="stylesheet">
    <link href="./css/prism.css" rel="stylesheet">
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="./js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body id="top">

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">WatirUs</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/install">Install</a></li>
            <!-- 
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="#">Action</a></li>
                <li><a href="#">Another action</a></li>
                <li><a href="#">Something else here</a></li>
                <li role="separator" class="divider"></li>
                <li class="dropdown-header">Nav header</li>
                <li><a href="#">Separated link</a></li>
                <li><a href="#">One more separated link</a></li>
              </ul>
            </li>
           -->
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>
    <div class="container">

      <div class="blog-header">
        <h1 class="blog-title">A WatirUs Blog</h1>
        <p class="lead blog-description">Working examples for using Watir for Web Testing.</p>
      </div>

      <div class="row">

        <div class="col-sm-8 blog-main">
          
<!-- BEGIN NEW BLOG BELOW HERE -->
<!-- Draft
          <div class="blog-post">
            <h2 class="blog-post-title" id="august">How I validate Analytics without a Proxy</h2>
            <p class="blog-post-meta">Aug 1, 2015 by <a href="#">Carldmitch</a></p>
            
            <p>
              

            </p>
            
            <pre><code class="language-ruby">
require 'watir-webdriver'

</code></pre>

 end Draft-->
          
<!-- First Post -->
          <div class="blog-post">
            <h2 class="blog-post-title" id="august">Single Page Link Checker</h2>
            <p class="blog-post-meta">Aug 1, 2015 by <a href="#">Carldmitch</a></p>
            
            <p>
                This file, when executed with a url as the only parameter will
                grab all the links on that page and then validate the status
                code for each one.
            </p>
            
            <pre><code class="language-ruby">
require 'watir-webdriver'
require 'colorize'
require 'rest-client'

@browser = Watir::Browser.new :chrome
@browser.goto "#{ARGV[0]}"
sleep 2

puts @browser.url
fin = @browser.links.to_a.uniq

href_ray = []
fin.each do |link|
  unless link.href.include? "javascript"
    href_ray.push(link.href)
  end
end
uniq_ray = href_ray.uniq
uniq_ray.reject! { |u| u.empty? }
puts "#{uniq_ray.count}".yellow + " unique links on page"
puts "checking each one now..."
@browser.close

uniq_ray.each do |link|
  begin
    # if you want to exclude any links you can do that below
    if link.include? "javascript" or 
       link.include? ".google.com"
    else
      RestClient.get(link){ |response, request, result, &block|
        case response.code
        when 200, 301, 302
          puts " #{response.code} at #{link}".green
        else
          puts " \n#{response.code} at #{link}\n".red
        end
        }
    end
  rescue
    puts link
    puts $!, $@
    next
  end
end
</code></pre>

          </div><!-- /.blog-post -->

          <!-- <nav>
            <ul class="pager">
              <li><a href="#">Previous</a></li>
              <li><a href="#">Next</a></li>
            </ul>
          </nav> -->

        </div><!-- /.blog-main -->

        <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
          <div class="sidebar-module sidebar-module-inset">
            <h4>About</h4>
            <p>Etiam porta <em>sem malesuada magna</em> mollis euismod. Cras mattis consectetur purus sit amet fermentum. Aenean lacinia bibendum nulla sed consectetur.</p>
          </div>
          <div class="sidebar-module">
            <h4>Archives</h4>
            <ol class="list-unstyled">
              <!-- <li><a href="#">July 2016</a></li>
              <li><a href="#">June 2016</a></li>
              <li><a href="#">May 2016</a></li>
              <li><a href="#">April 2016</a></li>
              <li><a href="#">March 2016</a></li>
              <li><a href="#">February 2016</a></li>
              <li><a href="#">January 2016</a></li>
              <li><a href="#">December 2015</a></li>
              <li><a href="#">November 2015</a></li>
              <li><a href="#">October 2015</a></li>
              <li><a href="#">September 2015</a></li>
move this up  -->
              <li><a href="#august">August 2015</a></li>
            </ol>
          </div>
          <div class="sidebar-module">
            <h4>Elsewhere</h4>
            <ol class="list-unstyled">
              <li><a href="https://github.com/watirus">GitHub</a></li>
              <li><a href="https://twitter.com/carldmitch">Twitter</a></li>
              <li><a href="#">Facebook</a></li>
            </ol>
          </div>
        </div><!-- /.blog-sidebar -->

      </div><!-- /.row -->

    </div><!-- /.container -->

    <footer class="blog-footer">
      <p>WatirUs is an ongoing effort by <a href="http://carldmitch.github.io/">Carldmitch</a>.</p>
      <p>
        <a href="#top">Back to top</a>
      </p>
    </footer>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="./js/prism.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="./js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="./js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
